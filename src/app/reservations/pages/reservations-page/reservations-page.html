<section class="reservations-page">

  <h2 class="page-title">Mis Reservas</h2>

  <div class="loading" *ngIf="isLoading">
    <p>Cargando reservas...</p>
  </div>

  <ng-container *ngIf="!isLoading">

    <ng-container *ngIf="reservations$ | async as reservations">

      <div class="table-wrapper" *ngIf="reservations.length > 0">
        <table class="reservations-table">
          <thead>
            <tr>
              <th>Evento</th>
              <th>Inicio</th>
              <th>Fin</th>
              <th class="actions-col"></th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let r of reservations">
              <td class="event">
                <i class="pi pi-calendar"></i>
                {{ r.event_name }}
              </td>
              <td>{{ r.start_time | date:'dd/MM/yyyy HH:mm' }}</td>
              <td>{{ r.end_time | date:'dd/MM/yyyy HH:mm' }}</td>
              <td class="actions">
                <button
                  class="btn-delete"
                  (click)="confirmDelete(r.id)">
                  Cancelar
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="empty-state" *ngIf="reservations.length === 0">
        <i class="pi pi-inbox"></i>
        <p>No tienes reservas registradas</p>
      </div>

    </ng-container>

  </ng-container>

  <div class="modal-backdrop" *ngIf="deletingId !== null">
    <div class="modal">
      <h3>Cancelar reserva</h3>
      <p>Esta acción no se puede deshacer. ¿Deseas continuar?</p>

      <div class="modal-actions">
        <button class="btn-secondary" (click)="cancelDelete()">
          Volver
        </button>
        <button class="btn-danger" (click)="deleteReservation()">
          Sí, cancelar
        </button>
      </div>
    </div>
  </div>

</section>

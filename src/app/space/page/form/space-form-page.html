<section class="space-form-section">

  <ng-container *ngIf="vm$ | async as vm">

    <div class="loading" *ngIf="vm.loading">
      Cargando información del espacio...
    </div>

    <div class="space-form-card" *ngIf="!vm.loading">

      <h1 class="title">
        {{ isEditMode ? 'Editar espacio' : 'Crear espacio' }}
      </h1>

      <form [formGroup]="spaceForm" (ngSubmit)="submit()">

        <div class="form-row">
          <label>Nombre</label>
          <input type="text" formControlName="name" />
        </div>

        <div class="form-row">
          <label>Descripción</label>
          <textarea rows="3" formControlName="description"></textarea>
        </div>

        <div class="form-row">
          <label>Capacidad</label>
          <input type="number" formControlName="capacity" />
        </div>

        <div class="image-preview" *ngIf="imagePreview">
          <img [src]="imagePreview" alt="Preview" />
        </div>

        <div class="form-row file-row">
          <label class="file-label">
            <input type="file" accept="image/*" (change)="onFileSelected($event)" hidden />
            <span class="file-btn">Seleccionar imagen</span>
          </label>
        </div>

        <button type="submit" class="submit-btn" [disabled]="isSubmitting">
          {{ isSubmitting
            ? (isEditMode ? 'Actualizando...' : 'Creando...')
            : (isEditMode ? 'Actualizar' : 'Crear')
          }}
        </button>

      </form>

    </div>

  </ng-container>

</section>
